{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b3d887ab144ca7235627","webpack:///./src/index.js","webpack:///./src/common/tool.js","webpack:///./src/api/index.js","webpack:///./src/common/base64.js"],"names":["config","jsApiList","defaultImage","LOADED","LOGHEAD","scriptLoad","dmp","pageLoad","Promise","resolve","reject","window","addEventListener","setConfig","debugFlag","then","forEach","includes","api","push","all","res","values","wx","debug","appId","data","timestamp","nonceStr","noncestr","signature","ready","error","catch","initWechatShare","options","initWechatJSSDK","cfg","desc","description","link","location","href","imgUrl","image","onMenuShareTimeline","onMenuShareAppMessage","auth","isSilence","origin","pathname","test","console","warn","jumpUrl","user","userInfo","openid","JSON","parse","e","length","search","sessionStorage","setItem","hash","join","getOpenid","getUserInfo","isWeixin","setDmp","dmpStatus","singleLoad","isWeiXin","isIPhone","getCookie","source","head","document","getElementsByTagName","script","createElement","type","src","async","appendChild","onload","ua","navigator","userAgent","toLowerCase","getUrlParam","s","cache","kvs","split","o","item","decodeURIComponent","param","key","i","parts","name","cookie","result","undefined","cookies","shift","getJssdkConfig","customApi","xhr","XMLHttpRequest","readyState","responseText","open","setRequestHeader","send","encodeURIComponent","decode","base64decodechars","base64decode","t","n","r","u","charCodeAt","String","fromCharCode","utf8to16","charAt"],"mappings":"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","file":"./index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"nov\"] = factory();\n\telse\n\t\troot[\"nov\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b3d887ab144ca7235627","import {getCookie, getUrlParam, isIPhone, isWeiXin, singleLoad} from \"./common/tool\";\nimport {getJssdkConfig} from \"./api\";\nimport {decode} from \"./common/base64\";\n\nconst config = {\n    jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage'],\n    defaultImage: 'http://driverdl.lenovo.com.cn/FE/static/image/lenovo-share.jpg'\n}\n\nconst LOADED = 'LOADED'\nconst LOGHEAD = '[nov-wechat]'\n\nlet scriptLoad = null, dmp = false\n\nlet pageLoad = new Promise(function(resolve, reject) {\n    //fix Safari font cache bug\n    //https://segmentfault.com/q/1010000007319171/a-1020000007347261\n    if (isIPhone()) {\n        window.addEventListener('load', function() {\n            resolve(LOADED)\n        })\n    } else {\n        resolve('OK')\n    }\n})\n\nfunction setConfig({jsApiList, debugFlag}) {\n    if (!scriptLoad) {\n        scriptLoad = singleLoad('//res.wx.qq.com/open/js/jweixin-1.2.0.js').then(() => {\n            return LOADED\n        })\n    }\n\n    // api config 追加\n    jsApiList.forEach(api => {\n        if (!config.jsApiList.includes(api)) {\n            config.jsApiList.push(api)\n        }\n    })\n\n    return Promise.all([scriptLoad, getJssdkConfig()]).then(values => {\n        let res = values[1]\n\n        wx.config({\n            debug: debugFlag, // 开启调试模式\n            appId: res.data.appId, // 必填，公众号的唯一标识\n            timestamp: res.data.timestamp, // 必填，生成签名的时间戳\n            nonceStr: res.data.noncestr, // 必填，生成签名的随机串\n            signature: res.data.signature,// 必填，签名，见附录1\n            jsApiList: config.jsApiList\n        });\n\n        return new Promise((resolve, reject) => {\n            wx.ready(() => {\n                resolve(wx)\n            })\n            wx.error(error => {\n                reject(error)\n            })\n        })\n    }).catch(error => {\n        return Promise.reject(error)\n    })\n}\n\n/**\n * 设置微信分享\n * 在单页项目，当路由发生变化时，需要更新微信分享设置\n * @param options\n * <ul>\n *  <li>title 标题</li>\n *  <li>imgUrl 分享图片（旧版参数：image）</li>\n *  <li>desc 分享描述（旧版参数：description）</li>\n *  <li>link 分享链接</li>\n *  <li>type 分享类型,music、video或link，不填默认为link</li>\n *  <li>dataUrl 如果type是music或video，则要提供数据链接，默认为空</li>\n *  <li>success</li>\n *  <li>cancel</li>\n * </ul>\n * @returns {Promise<Object>}\n */\nexport const initWechatShare = function (options) {\n    return initWechatJSSDK({jsApiList: config.jsApiList}).then(wx => {\n        let cfg = {\n            desc: options.description,\n            link: options.link || location.href,\n            imgUrl: options.image || config.defaultImage,\n            ...options\n        }\n        wx.onMenuShareTimeline(cfg);\n        wx.onMenuShareAppMessage(cfg);\n        return 'ok'\n    })\n}\n\n/**\n * 设置指定的微信 JSSDK 权限\n * @param jsApiList\n * @param debugFlag\n * @returns {Promise}\n */\nexport const initWechatJSSDK = function({jsApiList = config.jsApiList, debugFlag = false}) {\n    if (!isWeiXin()) {\n        return Promise.reject('not wechat')\n    }\n\n    return setConfig({jsApiList, debugFlag})\n}\n\n/**\n * 授权并获取内容，静默仅获取openid，非静默下获取userInfo\n * @param isSilence\n */\nfunction auth(isSilence = true) {\n    let href = window.location.origin + window.location.pathname\n    if (!/.lenovo.com.cn/.test(href)) {\n        console.error(LOGHEAD, '网关不支持除 lenovo.com.cn 以外的域名授权。')\n    } else if (!isWeiXin()) {\n        console.warn(LOGHEAD, '需要在微信下打开窗口')\n    }\n\n    let jumpUrl = ['http://weixin.lenovo.com.cn/service/gateway/']\n\n    let user = getCookie('wxuser'), userInfo = null\n    if (user) {\n        userInfo = decode(user)\n    } else if (!isSilence) {\n        jumpUrl.push('NonsilentAuth?url='+href)\n    }\n\n    let openid = getCookie('openid') || getUrlParam('openid')\n    if (!openid && userInfo) {\n        // 如果有完整的info 信息，就从info 里获取openid\n        try {\n            openid = JSON.parse(userInfo).openid\n        } catch (e) {\n            console.error(LOGHEAD, 'JSON parse error', e)\n        }\n    }\n    if (openid && isSilence) {\n        return openid\n    } else if (isSilence) {\n        jumpUrl.push('AutoAuthorize?url='+href)\n    }\n\n    if (jumpUrl.length > 1) {\n        if (dmp) {\n            window.location.search ? jumpUrl.push(window.location.search + '&dmp=1') : jumpUrl.push('?dmp=1')\n        }\n        pageLoad.then(() => {\n            sessionStorage.setItem('nov-url-hash', window.location.hash)\n            window.location.href = jumpUrl.join('')\n        })\n        return null\n    }\n\n    return isSilence ? openid : userInfo\n}\n\n/**\n * 静默授权，分别从URL里or cookie 里尝试获取openid\n * 需要注意的是，正在执行location jump 时，此刻返回值可能为null，需要在代码里判断返回值的可用性\n * @returns {String}\n */\nexport const getOpenid = function() {\n    return auth(true)\n}\n\n/**\n * 非静默授权，用于获取用户基本信息（即便是未关注的用户）\n * 需要注意的是，正在执行location jump 时，此刻返回值可能为null，需要在代码里判断返回值的可用性\n * @returns {String}\n */\nexport const getUserInfo = function() {\n    return auth(false)\n}\n\n/**\n * 是否是微信浏览器\n * @type {boolean}\n */\nexport const isWeixin = isWeiXin()\n\n/**\n * 是否启用DMP cookie 默认为false\n * @param dmpStatus\n */\nexport const setDmp = function(dmpStatus) {\n\tdmp = dmpStatus\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/**\n * 脚本按需加载\n * @param source\n * @returns {Promise}\n */\nexport function singleLoad(source) {\n    let head = document.getElementsByTagName('head')[0];\n    let script = document.createElement(\"script\")\n    script.type = 'text/javascript'\n    script.src = source\n    script.async = true\n    head.appendChild(script)\n    return new Promise((resolve, reject) => {\n        script.onload = () => {\n            resolve()\n        }\n    })\n}\n\nconst ua = window.navigator.userAgent.toLowerCase()\n/**\n * 是否为微信环境\n * @returns {boolean}\n */\nexport function isWeiXin() {\n    return ua.includes('micromessenger')\n}\n\n/**\n * 是否为iPhone\n * @returns {boolean}\n */\nexport function isIPhone() {\n    /iphone os/.test(ua)\n}\n\n/**\n * 获取URL里的参数\n * @param param\n * @returns {*}\n */\nexport const getUrlParam = (function() {\n    let s = location.search, cache = {};\n    let kvs = s.split(\"?\")[1] ? s.split(\"?\")[1].split(\"&\") : [];\n    kvs.forEach(item => {\n        let o = item.split(\"=\");\n        cache[o[0]] = decodeURIComponent(o[1])\n    })\n\n    return function (param) {\n        return cache[param]\n    }\n})();\n\n/**\n *  Get a cookie value.\n *\n *  @param key The cookie key name.\n */\nexport function getCookie(key) {\n    let i, parts, name, cookie;\n    let result = key ? undefined : '';\n    /* istanbul ignore next */\n    let cookies = (document.cookie || '').split('; ');\n    for (i = 0; i < cookies.length; i++) {\n        parts = cookies[i].split('=');\n        name = parts.shift();\n        cookie = parts.join('=');\n        if (key && key === name) {\n            result = cookie;\n            break;\n        }\n    }\n    return result;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/tool.js","const customApi = '//gw.lenovo.com.cn/service/gateway/wechatJsConf'\n\n/**\n * 获取微信JSSDK签名\n * @returns {Promise}\n */\nexport function getJssdkConfig() {\n    return new Promise(function(resolve, reject) {\n        let xhr = new XMLHttpRequest();\n\n        xhr.addEventListener(\"readystatechange\", function () {\n            if (this.readyState === 4) {\n                resolve(JSON.parse(this.responseText))\n            }\n        });\n        xhr.addEventListener(\"error\", function(error) {\n        \treject(error)\n        })\n\n        xhr.open(\"POST\", customApi);\n        xhr.setRequestHeader(\"Accept\", \"*/*\");\n        xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\n        xhr.send('url=' + encodeURIComponent(window.location.href.split('#')[0]));\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/index.js","const base64decodechars = [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1];\n\nlet base64decode = function (e) {\n    let t, n, r, i, s, o, u;\n    o = e.length;\n    s = 0;\n    u = \"\";\n\n    while (s < o) {\n        do t = base64decodechars[e.charCodeAt(s++) & 255];\n        while (s < o && t == -1);\n        if (t == -1) break;\n        do n = base64decodechars[e.charCodeAt(s++) & 255];\n        while (s < o && n == -1);\n        if (n == -1) break;\n        u += String.fromCharCode(t << 2 | (n & 48) >> 4);\n        do {\n            r = e.charCodeAt(s++) & 255;\n            if (r == 61) return u;\n            r = base64decodechars[r];\n        } while (s < o && r == -1);\n        if (r == -1) break;\n        u += String.fromCharCode((n & 15) << 4 | (r & 60) >> 2);\n        do {\n            i = e.charCodeAt(s++) & 255;\n            if (i == 61) return u;\n            i = base64decodechars[i];\n        } while (s < o && i == -1);\n        if (i == -1) break;\n        u += String.fromCharCode((r & 3) << 6 | i);\n    }\n    return u;\n};\n\nlet utf8to16 = function (e) {\n    let t = \"\", n = 0, r = e.length, i, s, o;\n    while (n < r) {\n        i = e.charCodeAt(n++);\n        switch (i >> 4) {\n            case 0:\n            case 1:\n            case 2:\n            case 3:\n            case 4:\n            case 5:\n            case 6:\n            case 7:\n                t += e.charAt(n - 1);\n                break;\n            case 12:\n            case 13:\n                s = e.charCodeAt(n++);\n                t += String.fromCharCode((i & 31) << 6 | s & 63);\n                break;\n            case 14:\n                s = e.charCodeAt(n++);\n                o = e.charCodeAt(n++);\n                t += String.fromCharCode((i & 15) << 12 | (s & 63) << 6 | (o & 63) << 0);\n        }\n    }\n    return t;\n};\n\nexport function decode(data) {\n    return utf8to16(base64decode(data));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/base64.js"],"sourceRoot":""}