!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.nov=t():e.nov=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=0)}([function(e,t,n){var o,i,r;!function(s,a){i=[t,n(1),n(2),n(3),n(4)],o=a,void 0!==(r="function"==typeof o?o.apply(t,i):o)&&(e.exports=r)}(0,function(e,t,n,o,i){"use strict";function r(e){var t=e.jsApiList,i=e.debugFlag;return p||(p=(0,n.singleLoad)("//res.wx.qq.com/open/js/jweixin-1.2.0.js").then(function(){return u})),t.forEach(function(e){c.jsApiList.includes(e)||c.jsApiList.push(e)}),Promise.all([p,(0,o.getJssdkConfig)()]).then(function(e){var t=e[1];return wx.config({debug:i,appId:t.data.appId,timestamp:t.data.timestamp,nonceStr:t.data.noncestr,signature:t.data.signature,jsApiList:c.jsApiList}),new Promise(function(e,t){wx.ready(function(){e(wx)}),wx.error(function(e){t(e)})})}).catch(function(e){return Promise.reject(e)})}function s(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=window.location.href;/.lenovo.com.cn/.test(t)?(0,n.isWeiXin)()&&console.warn("[nov-wechat] 需要在微信下打开窗口"):console.error("[nov-wechat] 网关不支持除 lenovo.com.cn 以外的域名授权。");var o="",r=f.get("openid")||(0,n.getUrlParam)("openid");if(r&&e)return r;e&&(o="http://weixin.lenovo.com.cn/service/gateway/AutoAuthorize?url=");var s=f.get("wxuser"),a=null;return s?a=(0,i.decode)(s):e||(o="http://weixin.lenovo.com.cn/service/gateway/NonsilentAuth?url="),o?(d.then(function(){sessionStorage.setItem("nov-url-hash",window.location.hash),window.location.href=o+t}),null):e?r:a}Object.defineProperty(e,"__esModule",{value:!0}),e.isWeixin=e.getUserInfo=e.getOpenid=e.initWechatJSSDK=e.initWechatShare=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(t),c={jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone","onMenuShareWeibo"],defaultImage:"http://driverdl.lenovo.com.cn/FE/static/image/lenovo-share.jpg"},u="LOADED",p=null,f=new a.default,d=new Promise(function(e,t){(0,n.isIPhone)()?window.addEventListener("load",function(){e(u)}):e("OK")}),h=(e.initWechatShare=function(e){var t=e.title,n=e.image,o=e.description,i=e.link;return h({jsApiList:c.jsApiList}).then(function(e){var r={title:t,desc:o||"",link:i||location.href,imgUrl:n||c.defaultImage};e.onMenuShareTimeline(r),e.onMenuShareAppMessage(r)})},e.initWechatJSSDK=function(e){var t=e.jsApiList,o=void 0===t?c.jsApiList:t,i=e.debugFlag,s=void 0!==i&&i;return(0,n.isWeiXin)()?r({jsApiList:o,debugFlag:s}):Promise.reject("not wechat")});e.getOpenid=function(){return s(!0)},e.getUserInfo=function(){return s(!1)},e.isWeixin=(0,n.isWeiXin)()})},function(e,t,n){"use strict";function o(e){this.options=e||{},this.options.expires="number"==typeof this.options.expires?this.options.expires:30,this.options.path=void 0!==this.options.path?this.options.path:"/",this.options.secure="boolean"==typeof this.options.secure&&this.options.secure}function i(e,t,n){n=n||this.options;var o=parseInt(n.expires||-1);if(void 0!==t&&"function"!=typeof t){var i=new Date;i.setDate(i.getDate()+o);return document.cookie=[this.encode(e),"=",this.stringify(t),n.expires?"; expires="+i.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}}function r(e,t){var n,o,i,r,s=e?void 0:{},a=(document.cookie||"").split("; ");for(n=0;n<a.length;n++){if(o=a[n].split("="),i=this.decode(o.shift()),r=o.join("="),e&&e===i){s=this.read(r,t);break}e||void 0===(r=this.read(r))||(s[i]=r)}return s}function s(e,t){if(!t){t={};for(var n in this.options)t[n]=this.options[n]}t.expires=-1,this.set(e,"",t)}function a(e,t){var n,o=this.get();e=e||[];for(n in o)~e.indexOf(n)||this.del(n,t)}function c(e){return this.options.raw?e:encodeURIComponent(e)}function u(e){return this.options.raw?e:decodeURIComponent(e)}function p(e,t){var n=this.options.raw?e:this.parse(e);return"function"==typeof t?t(n):n}function f(e){return this.encode(this.options.json?JSON.stringify(e):String(e))}function d(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(h," ")),this.options.json?JSON.parse(e):e}catch(e){}}var h=/\+/g,l=o.prototype;l.set=i,l.get=r,l.del=s,l.clear=a,l.encode=c,l.decode=u,l.read=p,l.stringify=f,l.parse=d,e.exports=o},function(e,t,n){var o,i,r;!function(n,s){i=[t],o=s,void 0!==(r="function"==typeof o?o.apply(t,i):o)&&(e.exports=r)}(0,function(e){"use strict";function t(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");return n.type="text/javascript",n.src=e,n.async=!0,t.appendChild(n),new Promise(function(e,t){n.onload=function(){e()}})}function n(){return i.includes("micromessenger")}function o(){/iphone os/.test(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.singleLoad=t,e.isWeiXin=n,e.isIPhone=o;var i=window.navigator.userAgent.toLowerCase();e.getUrlParam=function(){var e=location.search,t={};return(e.split("?")[1]?e.split("?")[1].split("&"):[]).forEach(function(e){var n=e.split("=");t[n[0]]=decodeURIComponent(n[1])}),function(e){return t[e]}}()})},function(e,t,n){var o,i,r;!function(n,s){i=[t],o=s,void 0!==(r="function"==typeof o?o.apply(t,i):o)&&(e.exports=r)}(0,function(e){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"//gw.lenovo.com.cn/service/gateway/wechatJsConf";return new Promise(function(t,n){var o=new XMLHttpRequest;o.addEventListener("readystatechange",function(){4===this.readyState&&t(JSON.parse(this.responseText))}),o.addEventListener("error",function(e){n(e)}),o.open("POST",e),o.setRequestHeader("Accept","*/*"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send("url="+encodeURIComponent(window.location.href.split("#")[0]))})}Object.defineProperty(e,"__esModule",{value:!0}),e.getJssdkConfig=t})},function(e,t,n){var o,i,r;!function(n,s){i=[e],o=s,void 0!==(r="function"==typeof o?o.apply(t,i):o)&&(e.exports=r)}(0,function(e){"use strict";var t=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),n=function(e){var n,o,i,r,s,a,c;for(a=e.length,s=0,c="";s<a;){do{n=t[255&e.charCodeAt(s++)]}while(s<a&&-1==n);if(-1==n)break;do{o=t[255&e.charCodeAt(s++)]}while(s<a&&-1==o);if(-1==o)break;c+=String.fromCharCode(n<<2|(48&o)>>4);do{if(61==(i=255&e.charCodeAt(s++)))return c;i=t[i]}while(s<a&&-1==i);if(-1==i)break;c+=String.fromCharCode((15&o)<<4|(60&i)>>2);do{if(61==(r=255&e.charCodeAt(s++)))return c;r=t[r]}while(s<a&&-1==r);if(-1==r)break;c+=String.fromCharCode((3&i)<<6|r)}return c},o=function(e){var t,n,o,i,r,s;for(t="",o=e.length,n=0;n<o;)switch((i=e.charCodeAt(n++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(n-1);break;case 12:case 13:r=e.charCodeAt(n++),t+=String.fromCharCode((31&i)<<6|63&r);break;case 14:r=e.charCodeAt(n++),s=e.charCodeAt(n++),t+=String.fromCharCode((15&i)<<12|(63&r)<<6|(63&s)<<0)}return t};e.exports.decode=function(e){return o(n(e))}})}])});