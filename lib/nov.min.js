!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.nov=n():e.nov=n()}("undefined"!=typeof self?self:this,function(){return function(e){function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="./",n(n.s=0)}([function(e,n,t){var o,i,r;!function(a,c){i=[n,t(1),t(2),t(3)],o=c,void 0!==(r="function"==typeof o?o.apply(n,i):o)&&(e.exports=r)}(0,function(e,n,t,o){"use strict";function i(e){var o=e.jsApiList,i=e.debugFlag;return u||(u=(0,n.singleLoad)("//res.wx.qq.com/open/js/jweixin-1.2.0.js").then(function(){return s})),o.forEach(function(e){c.jsApiList.includes(e)||c.jsApiList.push(e)}),Promise.all([u,(0,t.getJssdkConfig)()]).then(function(e){var n=e[1];return wx.config({debug:i,appId:n.data.appId,timestamp:n.data.timestamp,nonceStr:n.data.noncestr,signature:n.data.signature,jsApiList:c.jsApiList}),new Promise(function(e,n){wx.ready(function(){e(wx)}),wx.error(function(e){n(e)})})}).catch(function(e){return Promise.reject(e)})}function r(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=window.location.origin+window.location.pathname;/.lenovo.com.cn/.test(t)?(0,n.isWeiXin)()||console.warn("[nov-wechat] 需要在微信下打开窗口"):console.error("[nov-wechat] 网关不支持除 lenovo.com.cn 以外的域名授权。");var i=["http://weixin.lenovo.com.cn/service/gateway/"],r=(0,n.getCookie)("openid")||(0,n.getUrlParam)("openid");if(r&&e)return r;e&&i.push("AutoAuthorize?url="+t);var a=(0,n.getCookie)("wxuser"),c=null;return a?c=(0,o.decode)(a):e||i.push("NonsilentAuth?url="+t),i.length>1?(d&&(window.location.search?i.push(window.location.search+"&dmp=1"):i.push("?dmp=1")),f.then(function(){sessionStorage.setItem("nov-url-hash",window.location.hash),window.location.href=i.join("")}),null):e?r:c}Object.defineProperty(e,"__esModule",{value:!0}),e.setDmp=e.isWeixin=e.getUserInfo=e.getOpenid=e.initWechatJSSDK=e.initWechatShare=void 0;var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},c={jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"],defaultImage:"http://driverdl.lenovo.com.cn/FE/static/image/lenovo-share.jpg"},s="LOADED",u=null,d=!1,f=new Promise(function(e,t){(0,n.isIPhone)()?window.addEventListener("load",function(){e(s)}):e("OK")}),p=(e.initWechatShare=function(e){return p({jsApiList:c.jsApiList}).then(function(n){var t=a({desc:e.description,link:e.link||location.href,imgUrl:e.image||c.defaultImage},e);return n.onMenuShareTimeline(t),n.onMenuShareAppMessage(t),"ok"})},e.initWechatJSSDK=function(e){var t=e.jsApiList,o=void 0===t?c.jsApiList:t,r=e.debugFlag,a=void 0!==r&&r;return(0,n.isWeiXin)()?i({jsApiList:o,debugFlag:a}):Promise.reject("not wechat")});e.getOpenid=function(){return r(!0)},e.getUserInfo=function(){return r(!1)},e.isWeixin=(0,n.isWeiXin)(),e.setDmp=function(e){d=e}})},function(e,n,t){var o,i,r;!function(t,a){i=[n],o=a,void 0!==(r="function"==typeof o?o.apply(n,i):o)&&(e.exports=r)}(0,function(e){"use strict";function n(e){var n=document.getElementsByTagName("head")[0],t=document.createElement("script");return t.type="text/javascript",t.src=e,t.async=!0,n.appendChild(t),new Promise(function(e,n){t.onload=function(){e()}})}function t(){return r.includes("micromessenger")}function o(){/iphone os/.test(r)}function i(e){var n=void 0,t=void 0,o=void 0,i=void 0,r=e?void 0:"",a=(document.cookie||"").split("; ");for(n=0;n<a.length;n++)if(t=a[n].split("="),o=t.shift(),i=t.join("="),e&&e===o){r=i;break}return r}Object.defineProperty(e,"__esModule",{value:!0}),e.singleLoad=n,e.isWeiXin=t,e.isIPhone=o,e.getCookie=i;var r=window.navigator.userAgent.toLowerCase();e.getUrlParam=function(){var e=location.search,n={};return(e.split("?")[1]?e.split("?")[1].split("&"):[]).forEach(function(e){var t=e.split("=");n[t[0]]=decodeURIComponent(t[1])}),function(e){return n[e]}}()})},function(e,n,t){var o,i,r;!function(t,a){i=[n],o=a,void 0!==(r="function"==typeof o?o.apply(n,i):o)&&(e.exports=r)}(0,function(e){"use strict";function n(){return new Promise(function(e,n){var o=new XMLHttpRequest;o.addEventListener("readystatechange",function(){4===this.readyState&&e(JSON.parse(this.responseText))}),o.addEventListener("error",function(e){n(e)}),o.open("POST",t),o.setRequestHeader("Accept","*/*"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send("url="+encodeURIComponent(window.location.href.split("#")[0]))})}Object.defineProperty(e,"__esModule",{value:!0}),e.getJssdkConfig=n;var t="//gw.lenovo.com.cn/service/gateway/wechatJsConf"})},function(e,n,t){var o,i,r;!function(t,a){i=[n],o=a,void 0!==(r="function"==typeof o?o.apply(n,i):o)&&(e.exports=r)}(0,function(e){"use strict";function n(e){return i(o(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.decode=n;var t=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],o=function(e){var n=void 0,o=void 0,i=void 0,r=void 0,a=void 0,c=void 0,s=void 0;for(c=e.length,a=0,s="";a<c;){do{n=t[255&e.charCodeAt(a++)]}while(a<c&&-1==n);if(-1==n)break;do{o=t[255&e.charCodeAt(a++)]}while(a<c&&-1==o);if(-1==o)break;s+=String.fromCharCode(n<<2|(48&o)>>4);do{if(61==(i=255&e.charCodeAt(a++)))return s;i=t[i]}while(a<c&&-1==i);if(-1==i)break;s+=String.fromCharCode((15&o)<<4|(60&i)>>2);do{if(61==(r=255&e.charCodeAt(a++)))return s;r=t[r]}while(a<c&&-1==r);if(-1==r)break;s+=String.fromCharCode((3&i)<<6|r)}return s},i=function(e){for(var n="",t=0,o=e.length,i=void 0,r=void 0,a=void 0;t<o;)switch((i=e.charCodeAt(t++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=e.charAt(t-1);break;case 12:case 13:r=e.charCodeAt(t++),n+=String.fromCharCode((31&i)<<6|63&r);break;case 14:r=e.charCodeAt(t++),a=e.charCodeAt(t++),n+=String.fromCharCode((15&i)<<12|(63&r)<<6|(63&a)<<0)}return n}})}])});