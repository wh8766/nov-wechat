!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.nov=t():e.nov=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=0)}([function(e,t,n){var o,i,r;!function(s,a){i=[t,n(1),n(2),n(3)],o=a,void 0!==(r="function"==typeof o?o.apply(t,i):o)&&(e.exports=r)}(0,function(e,t,n,o){"use strict";function i(e){var t=e.jsApiList,i=e.debugFlag;return c||(c=(0,n.singleLoad)("//res.wx.qq.com/open/js/jweixin-1.2.0.js").then(function(){return a})),t.forEach(function(e){s.jsApiList.includes(e)||s.jsApiList.push(e)}),Promise.all([c,(0,o.getJssdkConfig)()]).then(function(e){var t=e[1];return wx.config({debug:i,appId:t.data.appId,timestamp:t.data.timestamp,nonceStr:t.data.noncestr,signature:t.data.signature,jsApiList:s.jsApiList}),new Promise(function(e,t){wx.ready(function(){e(wx)}),wx.error(function(e){t(e)})})}).catch(function(e){return Promise.reject(e)})}Object.defineProperty(e,"__esModule",{value:!0}),e.isWeixin=e.getOpenid=e.initWechatJSSDK=e.initWechatShare=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(t),s={jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone","onMenuShareWeibo"],defaultImage:"http://driverdl.lenovo.com.cn/FE/static/image/lenovo-share.jpg"},a="LOADED",c=null,u=new r.default,p=new Promise(function(e,t){(0,n.isIPhone)()?window.addEventListener("load",function(){e(a)}):e("OK")}),f=(e.initWechatShare=function(e){var t=e.title,n=e.image,o=e.description,i=e.link;return f({jsApiList:s.jsApiList}).then(function(e){var r={title:t,desc:o||"",link:i||location.href,imgUrl:n||s.defaultImage};e.onMenuShareTimeline(r),e.onMenuShareAppMessage(r)})},e.initWechatJSSDK=function(e){var t=e.jsApiList,o=void 0===t?s.jsApiList:t,r=e.debugFlag,a=void 0!==r&&r;return(0,n.isWeiXin)()?i({jsApiList:o,debugFlag:a}):Promise.reject("not wechat")});e.getOpenid=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/.lenovo.com.cn/,o=window.location.href;/.lenovo.com.cn/.test(o)||console.error("[nov-wechat] 网关不支持除 lenovo.com.cn 以外的域名授权。");var i=document.referrer||o;if(!t.test(i))return console.warn("[nov-wechat] 在非指定域名下的页面不再获取openid，如iframe 内打开本页面。"),"iframe-no-openid";var r=(0,n.getUrlParam)("openid"),s=u.get("openid");if(!s&&!r&&(0,n.isWeiXin)()){sessionStorage.setItem("nov-url-hash",window.location.hash);var a="http://weixin.lenovo.com.cn/service/gateway/AutoAuthorize?url=";return e||(a="http://weixin.lenovo.com.cn/service/gateway/NonsilentAuth?url="),p.then(function(){window.location.href=a+o}),null}return r||s},e.isWeixin=(0,n.isWeiXin)()})},function(e,t,n){"use strict";function o(e){this.options=e||{},this.options.expires="number"==typeof this.options.expires?this.options.expires:30,this.options.path=void 0!==this.options.path?this.options.path:"/",this.options.secure="boolean"==typeof this.options.secure&&this.options.secure}function i(e,t,n){n=n||this.options;var o=parseInt(n.expires||-1);if(void 0!==t&&"function"!=typeof t){var i=new Date;i.setDate(i.getDate()+o);return document.cookie=[this.encode(e),"=",this.stringify(t),n.expires?"; expires="+i.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}}function r(e,t){var n,o,i,r,s=e?void 0:{},a=(document.cookie||"").split("; ");for(n=0;n<a.length;n++){if(o=a[n].split("="),i=this.decode(o.shift()),r=o.join("="),e&&e===i){s=this.read(r,t);break}e||void 0===(r=this.read(r))||(s[i]=r)}return s}function s(e,t){if(!t){t={};for(var n in this.options)t[n]=this.options[n]}t.expires=-1,this.set(e,"",t)}function a(e,t){var n,o=this.get();e=e||[];for(n in o)~e.indexOf(n)||this.del(n,t)}function c(e){return this.options.raw?e:encodeURIComponent(e)}function u(e){return this.options.raw?e:decodeURIComponent(e)}function p(e,t){var n=this.options.raw?e:this.parse(e);return"function"==typeof t?t(n):n}function f(e){return this.encode(this.options.json?JSON.stringify(e):String(e))}function d(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(l," ")),this.options.json?JSON.parse(e):e}catch(e){}}var l=/\+/g,h=o.prototype;h.set=i,h.get=r,h.del=s,h.clear=a,h.encode=c,h.decode=u,h.read=p,h.stringify=f,h.parse=d,e.exports=o},function(e,t,n){var o,i,r;!function(n,s){i=[t],o=s,void 0!==(r="function"==typeof o?o.apply(t,i):o)&&(e.exports=r)}(0,function(e){"use strict";function t(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");return n.type="text/javascript",n.src=e,n.async=!0,t.appendChild(n),new Promise(function(e,t){n.onload=function(){e()}})}function n(){return i.includes("micromessenger")}function o(){/iphone os/.test(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.singleLoad=t,e.isWeiXin=n,e.isIPhone=o;var i=window.navigator.userAgent.toLowerCase();e.getUrlParam=function(){var e=location.search,t={};return(e.split("?")[1]?e.split("?")[1].split("&"):[]).forEach(function(e){var n=e.split("=");t[n[0]]=decodeURIComponent(n[1])}),function(e){return t[e]}}()})},function(e,t,n){var o,i,r;!function(n,s){i=[t],o=s,void 0!==(r="function"==typeof o?o.apply(t,i):o)&&(e.exports=r)}(0,function(e){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"//gw.lenovo.com.cn/service/gateway/wechatJsConf";return new Promise(function(t,n){var o=new XMLHttpRequest;o.addEventListener("readystatechange",function(){4===this.readyState&&t(JSON.parse(this.responseText))}),o.addEventListener("error",function(e){n(e)}),o.open("POST",e),o.setRequestHeader("Accept","*/*"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send("url="+encodeURIComponent(window.location.href.split("#")[0]))})}Object.defineProperty(e,"__esModule",{value:!0}),e.getJssdkConfig=t})}])});