!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.nov=n():e.nov=n()}("undefined"!=typeof self?self:this,function(){return function(e){function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="./",n(n.s=0)}([function(e,n,t){var o,i,r;!function(s,a){i=[n,t(1),t(2),t(3)],o=a,void 0!==(r="function"==typeof o?o.apply(n,i):o)&&(e.exports=r)}(0,function(e,n,t,o){"use strict";function i(e){var n=e.jsApiList,i=e.debugFlag;return c||(c=(0,t.singleLoad)("//res.wx.qq.com/open/js/jweixin-1.2.0.js").then(function(){return a})),n.forEach(function(e){s.jsApiList.includes(e)||s.jsApiList.push(e)}),Promise.all([c,(0,o.getJssdkConfig)()]).then(function(e){var n=e[1];return wx.config({debug:i,appId:n.data.appId,timestamp:n.data.timestamp,nonceStr:n.data.noncestr,signature:n.data.signature,jsApiList:s.jsApiList}),new Promise(function(e,n){wx.ready(function(){e(wx)}),wx.error(function(e){n(e)})})}).catch(function(e){return Promise.reject(e)})}Object.defineProperty(e,"__esModule",{value:!0}),e.isWeixin=e.getOpenid=e.initWechatJSSDK=e.initWechatShare=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n),s={jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone","onMenuShareWeibo"],defaultImage:"http://driverdl.lenovo.com.cn/FE/static/image/lenovo-share.jpg"},a="LOADED",c=null,u=new r.default,p=new Promise(function(e,n){(0,t.isIPhone)()?window.addEventListener("load",function(){e(a)}):e("OK")}),d=(e.initWechatShare=function(e){var n=e.title,t=e.image,o=e.description,i=e.link;return d({jsApiList:s.jsApiList}).then(function(e){var r={title:n,desc:o||"",link:i||location.href,imgUrl:t||s.defaultImage};e.onMenuShareTimeline(r),e.onMenuShareAppMessage(r)})},e.initWechatJSSDK=function(e){var n=e.jsApiList,o=void 0===n?s.jsApiList:n,r=e.debugFlag,a=void 0!==r&&r;return(0,t.isWeiXin)()?i({jsApiList:o,debugFlag:a}):Promise.reject("not wechat")});e.getOpenid=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/.lenovo.com.cn/,o=window.location.href;/.lenovo.com.cn/.test(o)||console.error("[nov-wechat] 网关不支持除 lenovo.com.cn 以外的域名授权。");var i=document.referrer||o;if(!n.test(i))return console.warn("[nov-wechat] 在非指定域名下的页面不再获取openid，如iframe 内打开本页面。"),"iframe-no-openid";var r=(0,t.getUrlParam)("openid"),s=u.get("openid");if(!s&&!r&&(0,t.isWeiXin)()){sessionStorage.setItem("nov-url-hash",window.location.hash);var a="http://weixin.lenovo.com.cn/service/gateway/AutoAuthorize?url=";return e||(a="http://weixin.lenovo.com.cn/service/gateway/NonsilentAuth?url="),p.then(function(){window.location.href=a+o}),null}return r||s},e.isWeixin=(0,t.isWeiXin)()})},function(e,n,t){"use strict";function o(e){this.options=e||{},this.options.expires="number"==typeof this.options.expires?this.options.expires:30,this.options.path=void 0!==this.options.path?this.options.path:"/",this.options.secure="boolean"==typeof this.options.secure&&this.options.secure}function i(e,n,t){t=t||this.options;var o=parseInt(t.expires||-1);if(void 0!==n&&"function"!=typeof n){var i=new Date;i.setDate(i.getDate()+o);return document.cookie=[this.encode(e),"=",this.stringify(n),t.expires?"; expires="+i.toUTCString():"",t.path?"; path="+t.path:"",t.domain?"; domain="+t.domain:"",t.secure?"; secure":""].join("")}}function r(e,n){var t,o,i,r,s=e?void 0:{},a=(document.cookie||"").split("; ");for(t=0;t<a.length;t++){if(o=a[t].split("="),i=this.decode(o.shift()),r=o.join("="),e&&e===i){s=this.read(r,n);break}e||void 0===(r=this.read(r))||(s[i]=r)}return s}function s(e,n){if(!n){n={};for(var t in this.options)n[t]=this.options[t]}n.expires=-1,this.set(e,"",n)}function a(e,n){var t,o=this.get();e=e||[];for(t in o)~e.indexOf(t)||this.del(t,n)}function c(e){return this.options.raw?e:encodeURIComponent(e)}function u(e){return this.options.raw?e:decodeURIComponent(e)}function p(e,n){var t=this.options.raw?e:this.parse(e);return"function"==typeof n?n(t):t}function d(e){return this.encode(this.options.json?JSON.stringify(e):String(e))}function f(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(l," ")),this.options.json?JSON.parse(e):e}catch(e){}}var l=/\+/g,h=o.prototype;h.set=i,h.get=r,h.del=s,h.clear=a,h.encode=c,h.decode=u,h.read=p,h.stringify=d,h.parse=f,e.exports=o},function(e,n,t){var o,i,r;!function(t,s){i=[n],o=s,void 0!==(r="function"==typeof o?o.apply(n,i):o)&&(e.exports=r)}(0,function(e){"use strict";function n(e){var n=document.getElementsByTagName("head")[0],t=document.createElement("script");return t.type="text/javascript",t.src=e,t.async=!0,n.appendChild(t),new Promise(function(e,n){t.onload=function(){e()}})}function t(){return i.includes("micromessenger")}function o(){/iphone os/.test(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.singleLoad=n,e.isWeiXin=t,e.isIPhone=o;var i=window.navigator.userAgent.toLowerCase();e.getUrlParam=function(){var e=location.search,n={};return(e.split("?")[1]?e.split("?")[1].split("&"):[]).forEach(function(e){var t=e.split("=");n[t[0]]=decodeURIComponent(t[1])}),function(e){return n[e]}}()})},function(e,n,t){var o,i,r;!function(t,s){i=[n],o=s,void 0!==(r="function"==typeof o?o.apply(n,i):o)&&(e.exports=r)}(0,function(e){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"//gw.lenovo.com.cn/service/gateway/wechatJsConf";return new Promise(function(n,t){var o=new XMLHttpRequest;o.addEventListener("readystatechange",function(){4===this.readyState&&n(JSON.parse(this.responseText))}),o.addEventListener("error",function(e){t(e)}),o.open("POST",e),o.setRequestHeader("Accept","*/*"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send("url="+encodeURIComponent(window.location.origin+window.location.pathname))})}Object.defineProperty(e,"__esModule",{value:!0}),e.getJssdkConfig=n})}])});