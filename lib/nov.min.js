//@copyright Lenovo service wechat jssdk, version: 0.2.5
var nov=function(e){"use strict";var n=window.navigator.userAgent.toLowerCase();function t(){return n.indexOf("micromessenger")>-1}var r,o,i=(r=location.search,o={},(r.split("?")[1]?r.split("?")[1].split("&"):[]).forEach(function(e){var n=e.split("=");o[n[0]]=decodeURIComponent(n[1])}),function(e){return o[e]});function a(e){var n=void 0,t=void 0,r=void 0,o=void 0,i=e?void 0:"",a=(document.cookie||"").split("; ");for(n=0;n<a.length;n++)if(r=(t=a[n].split("=")).shift(),o=t.join("="),e&&e===r){i=o;break}return i}var s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c="//gw.lenovo.com.cn/service/gateway/wechatJsConf";var u=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],d=function(e){var n,t=void 0,r=void 0,o=void 0,i=void 0,a=void 0,s=void 0;for(n=e.length,a=0,s="";a<n;){do{t=u[255&e.charCodeAt(a++)]}while(a<n&&-1==t);if(-1==t)break;do{r=u[255&e.charCodeAt(a++)]}while(a<n&&-1==r);if(-1==r)break;s+=String.fromCharCode(t<<2|(48&r)>>4);do{if(61==(o=255&e.charCodeAt(a++)))return s;o=u[o]}while(a<n&&-1==o);if(-1==o)break;s+=String.fromCharCode((15&r)<<4|(60&o)>>2);do{if(61==(i=255&e.charCodeAt(a++)))return s;i=u[i]}while(a<n&&-1==i);if(-1==i)break;s+=String.fromCharCode((3&o)<<6|i)}return s},l=function(e){for(var n="",t=0,r=e.length,o=void 0,i=void 0,a=void 0;t<r;)switch((o=e.charCodeAt(t++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=e.charAt(t-1);break;case 12:case 13:i=e.charCodeAt(t++),n+=String.fromCharCode((31&o)<<6|63&i);break;case 14:i=e.charCodeAt(t++),a=e.charCodeAt(t++),n+=String.fromCharCode((15&o)<<12|(63&i)<<6|(63&a)<<0)}return n};var h=function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)},f={jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"],defaultImage:"http://driverdl.lenovo.com.cn/FE/static/image/lenovo-share.jpg"},p="LOADED",v="[nov-wechat]",g="lenovoservicewx_openid",w="wxuser",m=null,A=!1,C=null;function j(e){var n,t,r,o=e.jsApiList,i=e.debugFlag;return m||(m=(n="//res.wx.qq.com/open/js/jweixin-1.2.0.js",t=document.getElementsByTagName("head")[0],r=document.createElement("script"),r.type="text/javascript",r.src=n,r.async=!0,t.appendChild(r),new Promise(function(e,n){r.onload=function(){e()}})).then(function(){return p})),o.forEach(function(e){f.jsApiList.includes(e)||f.jsApiList.push(e)}),Promise.all([m,new Promise(function(e,n){var t=new XMLHttpRequest;t.addEventListener("readystatechange",function(){if(4===this.readyState)try{e(JSON.parse(this.responseText))}catch(e){console.log(this.responseText),n(e)}}),t.addEventListener("error",function(e){n(e)}),t.open("POST",c),t.setRequestHeader("Accept","*/*"),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("url="+encodeURIComponent(window.location.href.split("#")[0]))})]).then(function(e){var n=e[1];return wx.config({debug:i,appId:n.data.appId,timestamp:n.data.timestamp,nonceStr:n.data.noncestr,signature:n.data.signature,jsApiList:[].concat(h(f.jsApiList))}),new Promise(function(e,n){wx.ready(function(){e(wx)}),wx.error(function(e){n(e)})})}).catch(function(e){return Promise.reject(e)})}var S=function(e){var n=e.jsApiList,r=void 0===n?f.jsApiList:n,o=e.debugFlag,i=void 0!==o&&o;return t()?j({jsApiList:r,debugFlag:i}):Promise.reject("not wechat")};function y(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=window.location,o=r.origin+r.pathname+r.search;if(!/.lenovo.com.cn/.test(o))return console.error(v,"网关不支持除 lenovo.com.cn 以外的域名授权。"),null;if(!t())return console.warn(v,"需要在微信下打开窗口"),null;var s=["http://weixin.lenovo.com.cn/service/gateway/"],c=a(w),u=null;c?u=l(d(c)):e||s.push("NonsilentAuth?url="+o);var h=a(g)||i("openid");if(!h&&u)try{h=JSON.parse(u).openid}catch(e){console.error(v,"JSON parse error",e)}return h&&e?h:(e&&s.push("AutoAuthorize?url="+o),s.length>1?(A&&(window.location.search?s.push(window.location.search+"&dmp=1"):s.push("?dmp=1")),C||(C=new Promise(function(e,t){void/iphone os/.test(n)?window.addEventListener("load",function(){e(p)}):e("OK")})),C.then(function(){sessionStorage.setItem("nov-url-hash",window.location.hash),window.location.href=s.join("")}),null):e?h:u)}var L=t();return e.initWechatShare=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return S({jsApiList:n}).then(function(n){var t=s({desc:e.description,link:e.link||location.href,imgUrl:e.image||f.defaultImage},e);return n.onMenuShareTimeline(t),n.onMenuShareAppMessage(t),n})},e.initWechatJSSDK=S,e.getOpenid=function(){return y(!0)},e.getUserInfo=function(){return y(!1)},e.isWeixin=L,e.setDmp=function(e){A=e},e}({});
//# sourceMappingURL=nov.min.js.map
