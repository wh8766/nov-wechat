//@copyright Lenovo service wechat jssdk, version: 0.2.6
var nov=function(e){"use strict";var t=window.navigator.userAgent.toLowerCase();function n(){return t.indexOf("micromessenger")>-1}var r,o,i=(r=location.search,o={},(r.split("?")[1]?r.split("?")[1].split("&"):[]).forEach(function(e){var t=e.split("=");o[t[0]]=decodeURIComponent(t[1])}),function(e){return o[e]});function a(e){var t=void 0,n=void 0,r=void 0,o=void 0,i=e?void 0:"",a=(document.cookie||"").split("; ");for(t=0;t<a.length;t++)if(r=(n=a[t].split("=")).shift(),o=n.join("="),e&&e===r){i=o;break}return i}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c="//gw.lenovo.com.cn/service/gateway/wechatJsConf";var d=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],u=function(e){var t,n=void 0,r=void 0,o=void 0,i=void 0,a=void 0,s=void 0;for(t=e.length,a=0,s="";a<t;){do{n=d[255&e.charCodeAt(a++)]}while(a<t&&-1==n);if(-1==n)break;do{r=d[255&e.charCodeAt(a++)]}while(a<t&&-1==r);if(-1==r)break;s+=String.fromCharCode(n<<2|(48&r)>>4);do{if(61==(o=255&e.charCodeAt(a++)))return s;o=d[o]}while(a<t&&-1==o);if(-1==o)break;s+=String.fromCharCode((15&r)<<4|(60&o)>>2);do{if(61==(i=255&e.charCodeAt(a++)))return s;i=d[i]}while(a<t&&-1==i);if(-1==i)break;s+=String.fromCharCode((3&o)<<6|i)}return s},l=function(e){for(var t="",n=0,r=e.length,o=void 0,i=void 0,a=void 0;n<r;)switch((o=e.charCodeAt(n++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(n-1);break;case 12:case 13:i=e.charCodeAt(n++),t+=String.fromCharCode((31&o)<<6|63&i);break;case 14:i=e.charCodeAt(n++),a=e.charCodeAt(n++),t+=String.fromCharCode((15&o)<<12|(63&i)<<6|(63&a)<<0)}return t};var h=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},p={jsApiList:["updateTimelineShareData","updateAppMessageShareData"],defaultImage:"http://driverdl.lenovo.com.cn/FE/static/image/lenovo-share.jpg"},f="LOADED",v="[nov-wechat]",g="lenovoservicewx_openid",w="wxuser",m=null,A=!1,C=null;function j(e){var t,n,r,o=e.jsApiList,i=e.debugFlag;return m||(m=(t="//res.wx.qq.com/open/js/jweixin-1.4.0.js",n=document.getElementsByTagName("head")[0],r=document.createElement("script"),r.type="text/javascript",r.src=t,r.async=!0,n.appendChild(r),new Promise(function(e,t){r.onload=function(){e()}})).then(function(){return f})),o.forEach(function(e){p.jsApiList.includes(e)||p.jsApiList.push(e)}),Promise.all([m,new Promise(function(e,t){var n=new XMLHttpRequest;n.addEventListener("readystatechange",function(){if(4===this.readyState)try{e(JSON.parse(this.responseText))}catch(e){console.log(this.responseText),t(e)}}),n.addEventListener("error",function(e){t(e)}),n.open("POST",c),n.setRequestHeader("Accept","*/*"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send("url="+encodeURIComponent(window.location.href.split("#")[0]))})]).then(function(e){var t=e[1];return wx.config({debug:i,appId:t.data.appId,timestamp:t.data.timestamp,nonceStr:t.data.noncestr,signature:t.data.signature,jsApiList:[].concat(h(p.jsApiList))}),new Promise(function(e,t){wx.ready(function(){e(wx)}),wx.error(function(e){t(e)})})}).catch(function(e){return Promise.reject(e)})}var S=function(e){var t=e.jsApiList,r=void 0===t?p.jsApiList:t,o=e.debugFlag,i=void 0!==o&&o;return n()?j({jsApiList:r,debugFlag:i}):Promise.reject("not wechat")};function y(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=window.location,o=r.origin+r.pathname+r.search;if(!/.lenovo.com.cn/.test(o))return console.error(v,"网关不支持除 lenovo.com.cn 以外的域名授权。"),null;if(!n())return console.warn(v,"需要在微信下打开窗口"),null;var s=["https://weixin.lenovo.com.cn/service/gateway/"],c=a(w),d=null;c?d=l(u(c)):e||s.push("NonsilentAuth?url="+o);var h=a(g)||i("openid");if(!h&&d)try{h=JSON.parse(d).openid}catch(e){console.error(v,"JSON parse error",e)}return h&&e?h:(e&&s.push("AutoAuthorize?url="+o),s.length>1?(A&&(window.location.search?s.push(window.location.search+"&dmp=1"):s.push("?dmp=1")),C||(C=new Promise(function(e,n){void/iphone os/.test(t)?window.addEventListener("load",function(){e(f)}):e("OK")})),C.then(function(){sessionStorage.setItem("nov-url-hash",window.location.hash),window.location.href=s.join("")}),null):e?h:d)}var L=n();return e.initWechatShare=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return S({jsApiList:t}).then(function(t){var n=s({title:"未设置标题",desc:e.description,link:e.link||location.href,imgUrl:e.image||p.defaultImage},e);return t.updateTimelineShareData(n),t.updateAppMessageShareData(n),t})},e.initWechatJSSDK=S,e.getOpenid=function(){return y(!0)},e.getUserInfo=function(){return y(!1)},e.isWeixin=L,e.setDmp=function(e){A=e},e}({});
//# sourceMappingURL=nov.min.js.map
